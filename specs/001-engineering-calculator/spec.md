# 功能規格：工程用計算機

**功能分支**: `001-engineering-calculator`
**建立日期**: 2025-11-01
**狀態**: 草稿
**輸入**: 使用者描述："建立一個「工程用計算機」\n1. 基本的加、減、乘、除\n2. 工程的部份：開根號、平方、sin、cos函數"

## 使用者情境與測試 *(必填)*

### 使用者故事 1 - 基本四則運算 (優先級: P1)

使用者需要執行日常的數學計算，包括加法、減法、乘法和除法運算。使用者輸入兩個數字和運算符號，系統立即顯示計算結果。

**優先級理由**: 基本四則運算是計算機的核心功能，也是所有使用者最頻繁使用的功能。沒有這個功能，計算機毫無價值。這是 MVP 的基礎。

**獨立測試**: 可以透過輸入任意兩個數字和四則運算符號（+、-、×、÷）來完全測試，並驗證結果的正確性。不依賴任何其他功能即可獨立運作。

**驗收情境**:

1. **Given** 使用者開啟計算機，**When** 輸入 "5 + 3" 並執行計算，**Then** 系統顯示結果 "8"
2. **Given** 使用者開啟計算機，**When** 輸入 "10 - 4" 並執行計算，**Then** 系統顯示結果 "6"
3. **Given** 使用者開啟計算機，**When** 輸入 "7 × 6" 並執行計算，**Then** 系統顯示結果 "42"
4. **Given** 使用者開啟計算機，**When** 輸入 "20 ÷ 4" 並執行計算，**Then** 系統顯示結果 "5"
5. **Given** 使用者開啟計算機，**When** 輸入 "15.5 + 2.3" 並執行計算，**Then** 系統顯示結果 "17.8"

---

### 使用者故事 2 - 單一運算元函數（平方與開根號） (優先級: P2)

使用者需要對單一數字執行平方或開根號運算。使用者輸入一個數字並選擇平方或開根號功能，系統立即顯示計算結果。

**優先級理由**: 這些是工程計算中最常用的單一運算元函數，頻率僅次於四則運算。獨立於三角函數，可以先行交付價值。

**獨立測試**: 可以透過輸入任意正數並執行平方或開根號運算來完全測試，不依賴其他功能即可獨立驗證正確性。

**驗收情境**:

1. **Given** 使用者開啟計算機，**When** 輸入 "5" 並執行平方運算，**Then** 系統顯示結果 "25"
2. **Given** 使用者開啟計算機，**When** 輸入 "25" 並執行開根號運算，**Then** 系統顯示結果 "5"
3. **Given** 使用者開啟計算機，**When** 輸入 "2.5" 並執行平方運算，**Then** 系統顯示結果 "6.25"
4. **Given** 使用者開啟計算機，**When** 輸入 "100" 並執行開根號運算，**Then** 系統顯示結果 "10"

---

### 使用者故事 3 - 三角函數（sin、cos） (優先級: P3)

使用者需要計算角度的正弦（sin）和餘弦（cos）值。使用者輸入角度值並選擇 sin 或 cos 函數，系統立即顯示計算結果。

**優先級理由**: 三角函數是工程計算的重要功能，但使用頻率低於基本運算和平方/開根號。可以在前兩個故事交付後再實作。

**獨立測試**: 可以透過輸入已知角度（如 0°、30°、45°、90°）並驗證 sin/cos 值來完全測試，不依賴其他功能即可獨立運作。

**驗收情境**:

1. **Given** 使用者開啟計算機，**When** 輸入角度 "0" 並執行 sin 運算，**Then** 系統顯示結果 "0"
2. **Given** 使用者開啟計算機，**When** 輸入角度 "0" 並執行 cos 運算，**Then** 系統顯示結果 "1"
3. **Given** 使用者開啟計算機，**When** 輸入角度 "90" 並執行 sin 運算，**Then** 系統顯示結果 "1"
4. **Given** 使用者開啟計算機，**When** 輸入角度 "90" 並執行 cos 運算，**Then** 系統顯示結果 "0"
5. **Given** 使用者開啟計算機，**When** 輸入角度 "30" 並執行 sin 運算，**Then** 系統顯示結果 "0.5"

---

### 邊界情況

- 除以零時會發生什麼？（系統應顯示錯誤訊息「無法除以零」）
- 對負數開根號時會發生什麼？（系統應顯示錯誤訊息「無法對負數開根號」）
- 輸入非數字字元時會發生什麼？（系統應顯示錯誤訊息「請輸入有效的數字」）
- 輸入極大或極小的數字時會發生什麼？（系統應處理浮點數溢位或下溢，顯示適當的錯誤訊息）
- 三角函數的角度範圍是否有限制？（預設假設為度數制，範圍 -360° 到 360°）

## 需求 *(必填)*

### 功能需求

- **FR-001**: 系統必須支援兩個數字之間的加法運算
- **FR-002**: 系統必須支援兩個數字之間的減法運算
- **FR-003**: 系統必須支援兩個數字之間的乘法運算
- **FR-004**: 系統必須支援兩個數字之間的除法運算
- **FR-005**: 系統必須支援單一數字的平方運算
- **FR-006**: 系統必須支援單一數字的開根號運算
- **FR-007**: 系統必須支援角度的正弦（sin）函數計算
- **FR-008**: 系統必須支援角度的餘弦（cos）函數計算
- **FR-009**: 系統必須能夠接受整數和小數作為輸入
- **FR-010**: 系統必須在除以零時顯示錯誤訊息
- **FR-011**: 系統必須在對負數開根號時顯示錯誤訊息
- **FR-012**: 系統必須在輸入無效字元時顯示錯誤訊息
- **FR-013**: 系統必須以度數制處理三角函數的角度輸入
- **FR-014**: 系統必須顯示計算結果，精確度至少到小數點後 6 位
- **FR-015**: 系統必須允許使用者清除當前輸入和結果

### 關鍵實體

- **運算式**: 包含運算子和運算元的數學表達式（例如："5 + 3"、"sqrt(25)"、"sin(30)"）
- **運算結果**: 計算後的數值結果，包含數值和可能的錯誤狀態
- **運算元**: 參與運算的數字（支援整數和浮點數）
- **運算子**: 執行的運算類型（加、減、乘、除、平方、開根號、sin、cos）

## 成功標準 *(必填)*

### 可衡量結果

- **SC-001**: 使用者可以在 5 秒內完成一次基本四則運算（從輸入到看到結果）
- **SC-002**: 使用者可以在 8 秒內完成一次工程函數計算（平方、開根號、三角函數）
- **SC-003**: 系統對所有標準測試案例（基本運算、邊界條件、錯誤處理）的計算準確率達到 100%
- **SC-004**: 90% 的使用者在首次使用時能夠成功完成基本四則運算，無需查看說明文件
- **SC-005**: 系統對三角函數計算的精確度誤差在 ±0.000001 以內（與標準數學函數庫比較）
- **SC-006**: 所有錯誤情況（除以零、負數開根號、無效輸入）都能在 1 秒內顯示清晰的錯誤訊息

## 假設

- 使用者熟悉基本的數學運算概念
- 三角函數使用度數制而非弧度制（這是工程計算機的標準慣例）
- 計算結果顯示精確度為小數點後 6 位，對於大多數工程應用已足夠
- 不需要支援運算歷史記錄功能（MVP 階段）
- 不需要支援複數運算（MVP 階段）
- 不需要支援括號和複雜表達式（MVP 階段，僅支援單一運算）
